---
import CV from "../components/CV.astro";
import Start from "../components/Start.astro";
import Navigation from "../components/Navigation.astro";
import Layout from "../layouts/Layout.astro";
---

<Layout>
  <Navigation />

  <div class="scroll-smooth snap-y snap-mandatory overflow-y-scroll h-dvh">
    <Start />
    <CV />
  </div>

  <script>
    const sections = document.querySelectorAll("div[id]");

    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting && entry.intersectionRatio > 0.5) {
            const id = entry.target.getAttribute("id");
            if (id) {
              // Update URL without scrolling
              history.replaceState(null, "", `#${id}`);
            }
          }
        });
      },
      {
        threshold: [0.5],
        rootMargin: "0px",
      }
    );

    sections.forEach((section) => observer.observe(section));
  </script>
</Layout>
